(function(e){if(!e.browser){e.browser={};e.browser.mozilla=/mozilla/.test(navigator.userAgent.toLowerCase())&&!/webkit/.test(navigator.userAgent.toLowerCase());e.browser.webkit=/webkit/.test(navigator.userAgent.toLowerCase());e.browser.opera=/opera/.test(navigator.userAgent.toLowerCase());e.browser.msie=/msie/.test(navigator.userAgent.toLowerCase())}var t={destroy:function(){var t=e(this);t.unbind(".maskMoney");if(e.browser.msie){this.onpaste=null}return this},mask:function(){return this.trigger("mask")},init:function(t){t=e.extend({symbol:"",symbolStay:false,thousands:",",decimal:".",precision:2,fixPrecisionOnValue:undefined,defaultZero:true,allowZero:false,allowNegative:false},t);var n=t.decimal;if(t.fixPrecisionOnValue!==undefined){for(y=0;y<t.precision;y++)n=n.concat(t.fixPrecisionOnValue)}return this.each(function(){function s(){i=true}function o(){i=false}function u(t){t=t||window.event;var n=t.which||t.charCode||t.keyCode;if(n==undefined)return false;if(n<48||n>57){if(n==45){s();r.val(y(r));return false}else if(n==43){s();r.val(r.val().replace("-",""));return false}else if(n==13||n==9){if(i){o();e(this).change()}return true}else if(e.browser.mozilla&&(n==37||n==39)&&t.charCode==0){return true}else{h(t);return true}}else if(a(r)){return false}else{h(t);var u=String.fromCharCode(n);var f=r.get(0);var l=w(f);var c=l.start;var d=l.end;f.value=f.value.substring(0,c)+u+f.value.substring(d,f.value.length);p(f,c+1);s();return false}}function a(e){var t=e.val().length>=e.attr("maxlength")&&e.attr("maxlength")>=0;var n=w(e.get(0));var r=n.start;var i=n.end;var s=n.start!=n.end&&e.val().substring(r,i).match(/\d/)?true:false;return t&&!s}function f(u){u=u||window.event;var a=u.which||u.charCode||u.keyCode;if(a==undefined)return false;var f=r.get(0);var l=w(f);var c=l.start;var d=l.end;if(a==8){h(u);if(c==d){if(t.fixPrecisionOnValue!==undefined&&c>=n.length){c-=n.length}f.value=f.value.substring(0,c-1)+f.value.substring(d,f.value.length);c=c-1}else{f.value=f.value.substring(0,c)+f.value.substring(d,f.value.length)}p(f,c);s();return false}else if(a==9){if(i){e(this).change();o()}return true}else if(a==46||a==63272){h(u);if(f.selectionStart==f.selectionEnd){f.value=f.value.substring(0,c)+f.value.substring(d+1,f.value.length)}else{f.value=f.value.substring(0,c)+f.value.substring(d,f.value.length)}p(f,c);s();return false}else{return true}}function l(e){var n=m();if(r.val()==n){r.val("")}else if(r.val()==""&&t.defaultZero){r.val(g(n))}else{r.val(g(r.val()))}if(this.createTextRange){var i=this.createTextRange();i.collapse(false);i.select()}}function c(n){if(e.browser.msie){u(n)}if(r.val()==""||r.val()==g(m())||r.val()==t.symbol){if(!t.allowZero){r.val("")}else if(!t.symbolStay){r.val(m())}else{r.val(g(m()))}}else{if(!t.symbolStay){r.val(r.val().replace(t.symbol,""))}else if(t.symbolStay&&r.val()==t.symbol){r.val(g(m()))}}}function h(e){if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}}function p(e,i){var s=r.val().length;var o=v(e.value);if(t.fixPrecisionOnValue!==undefined&&o.indexOf(n,o.length-n.length)===-1){o=o.concat(n)}r.val(o);var u=r.val().length;i=i-(s-u);b(r,i)}function d(){var e=r.val();r.val(v(e))}function v(e){e=e.replace(t.symbol,"").replace(n,"");var r="0123456789";var i=e.length;var s="",o="",u="";if(i!=0&&e.charAt(0)=="-"){e=e.replace("-","");if(t.allowNegative){u="-"}}if(i==0){if(!t.defaultZero)return o;o="0.00"}for(var a=0;a<i;a++){if(e.charAt(a)!="0"&&e.charAt(a)!=t.decimal)break}for(;a<i;a++){if(r.indexOf(e.charAt(a))!=-1)s+=e.charAt(a)}var f=parseFloat(s);f=isNaN(f)?0:t.fixPrecisionOnValue!==undefined?f:f/Math.pow(10,t.precision);o=f.toFixed(t.precision);a=t.precision==0?0:1;var l,c=(o=o.split("."))[a].substr(0,t.precision);for(l=(o=o[0]).length;(l-=3)>=1;){o=o.substr(0,l)+t.thousands+o.substr(l)}return t.precision>0?g(u+o+t.decimal+c+Array(t.precision+1-c.length).join(0)):g(u+o)}function m(){var e=parseFloat("0")/Math.pow(10,t.precision);return e.toFixed(t.precision).replace(new RegExp("\\.","g"),t.decimal)}function g(e){if(t.symbol!=""){var n="";if(e.length!=0&&e.charAt(0)=="-"){e=e.replace("-","");n="-"}if(e.substr(0,t.symbol.length)!=t.symbol){e=n+t.symbol+e}}return e}function y(e){var n=e.val();if(t.allowNegative){if(n!=""&&n.charAt(0)=="-"){return n.replace("-","")}else{return"-"+n}}else{return n}}function b(t,n){e(t).each(function(e,t){if(t.setSelectionRange){t.focus();t.setSelectionRange(n,n)}else if(t.createTextRange){var r=t.createTextRange();r.collapse(true);r.moveEnd("character",n);r.moveStart("character",n);r.select()}});return this}function w(e){var t=0,n=0,r,i,s,o,u;if(typeof e.selectionStart=="number"&&typeof e.selectionEnd=="number"){t=e.selectionStart;n=e.selectionEnd}else{i=document.selection.createRange();if(i&&i.parentElement()==e){o=e.value.length;r=e.value.replace(/\r\n/g,"\n");s=e.createTextRange();s.moveToBookmark(i.getBookmark());u=e.createTextRange();u.collapse(false);if(s.compareEndPoints("StartToEnd",u)>-1){t=n=o}else{t=-s.moveStart("character",-o);t+=r.slice(0,t).split("\n").length-1;if(s.compareEndPoints("EndToEnd",u)>-1){n=o}else{n=-s.moveEnd("character",-o);n+=r.slice(0,n).split("\n").length-1}}}}return{start:t,end:n}}var r=e(this);var i=false;if(!r.attr("readonly")){r.unbind(".maskMoney");r.bind("keypress.maskMoney",u);r.bind("keydown.maskMoney",f);r.bind("blur.maskMoney",c);r.bind("focus.maskMoney",l);r.bind("mask.maskMoney",d)}})}};e.fn.maskMoney=function(n){if(t[n]){return t[n].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof n==="object"||!n){return t.init.apply(this,arguments)}else{e.error("Method "+n+" does not exist on jQuery.maskMoney")}}})(jQuery)